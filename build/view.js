(()=>{"use strict";const e=(e,t=[])=>{const r="string"==typeof e?document.querySelector(e):e,n=r.querySelector("#cover"),o=r.querySelector("#disc"),a=r.querySelector("#title"),s=r.querySelector("#artist"),c=r.querySelector("#progressContainer"),i=r.querySelector("#progress"),u=r.querySelector("#timer"),d=r.querySelector("#duration"),l=r.querySelector("#prev"),p=r.querySelector("#play"),y=r.querySelector("#next");let f=0;const v=e=>{n.src=e.cover?.url||"https://i.ibb.co/1qDChXj/cassette-tape-square.jpg",o.src=e.audio?.url,a.textContent=e.title,s.textContent=e.artist,o.addEventListener("loadedmetadata",(function(){var e,t,r,n,a;d.innerHTML=(e=o.duration,t=parseInt(e,10),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),a=t-3600*r-60*n,r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),`${parseInt(r)>0?`${r}:`:""}${n}:${a}`)}))};function m(){o.paused?(document.querySelectorAll("audio").forEach((e=>e?.pause())),o.play()):o.pause()}function h(){o.paused?(p.classList.remove("pauseBtn"),p.classList.add("playBtn")):(p.classList.remove("playBtn"),p.classList.add("pauseBtn"))}function q(){i.style.width="0%",u.textContent="0:00"}function L(e){f<t.length-1&&(()=>{f===t.length-1?f=0:f+=1;const r=!o.paused;v(t[f]),q(),(r||e)&&m()})()}v(t[f]),p.addEventListener("click",m),o.addEventListener("play",h),o.addEventListener("pause",h),o.addEventListener("timeupdate",(function(){i.style.width=o.currentTime/o.duration*100+"%";var e=Math.floor(o.currentTime/3600),t=Math.floor((o.currentTime-3600*e)/60),r=Math.floor(o.currentTime-3600*e-60*t);e<10&&(e="0"+e),t<10&&(t="0"+t),r<10&&(r="0"+r),u.textContent=`${parseInt(e)>0?`${e}:`:""}${t}:${r}`})),o.addEventListener("ended",L.bind(null,!0)),l.addEventListener("click",(function(){0===f?f=t.length-1:f-=1;const e=!o.paused;v(t[f]),q(),e&&m()})),y.addEventListener("click",L.bind(null,!1)),c.addEventListener("click",(function(e){const t=this.clientWidth,r=e.offsetX/t;o.currentTime=r*o.duration}))};document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-bpmp-mp3-player").forEach((t=>{const r=JSON.parse(t.dataset.attributes),{audioProperties:n}=r;e(t,n),t?.removeAttribute("data-attributes")}))}))})();